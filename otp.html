<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Enter OTP - S.J Hotel Family Restaurant</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="container">
    <h2>Enter OTP</h2>
    <p>We've generated your OTP below. Enter it to proceed.</p>
    <div class="otp-box">
      <p>Your OTP: <strong id="generated-otp"></strong></p>
    </div>
    <input type="text" placeholder="Enter OTP" id="otp-input" maxlength="6" />
    <button class="continue-btn" onclick="verifyOTP()">Verify OTP</button>
    <p id="timer"></p>
    <p class="resend">Didn't receive the OTP? <a href="#" onclick="generateOTP()">Regenerate OTP</a></p>
  </div>

  <script>
    let currentOTP;
    let otpTimeout;

    function generateOTP() {
      currentOTP = Math.floor(100000 + Math.random() * 900000);
      document.getElementById('generated-otp').innerText = currentOTP;
      startTimer();
      console.log("OTP generated:", currentOTP);
    }

    function startTimer() {
      clearTimeout(otpTimeout);
      let timeLeft = 30;
      const timerDisplay = document.getElementById('timer');

      const countdown = setInterval(() => {
        if (timeLeft <= 0) {
          clearInterval(countdown);
          currentOTP = null;
          timerDisplay.innerText = "OTP expired. Please regenerate.";
        } else {
          timerDisplay.innerText = "OTP expires in " + timeLeft + " seconds.";
          timeLeft--;
        }
      }, 1000);
    }

    function verifyOTP() {
      const userOTP = document.getElementById('otp-input').value.trim();
      if (!currentOTP) {
        alert('OTP expired. Please regenerate.');
      } else if (userOTP == currentOTP) {
        alert('OTP verified successfully!');
        window.location.href = 'home.html'; // Aage ka page redirect
      } else {
        alert('Invalid OTP. Please try again.');
      }
    }

    // Auto-generate OTP on page load
    window.onload = generateOTP;
  </script>
</body>
</html>
